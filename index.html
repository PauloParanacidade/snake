<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snake</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Snake</h1>
      <p class="subtitle">Criado por Paulinho</p>
    </header>

    <main class="main">
      <div class="game-panel">
        <div class="game-info">
          <div class="score-board">
            <span>Pontos: <strong id="score">0</strong></span>
            <span>Recorde: <strong id="highScore">0</strong></span>
            <span>Velocidade: <strong id="speedLevel">1 de 10</strong></span>
          </div>
          <div class="game-controls">
            <button id="startBtn" class="game-btn">Iniciar</button>
            <button id="pauseBtn" class="game-btn hidden">Pausar</button>
            <button id="restartBtn" class="game-btn">Reiniciar</button>
          </div>
        </div>
        <div class="canvas-wrapper">
          <canvas id="gameCanvas" width="520" height="520" tabindex="0" aria-label="Área do jogo"></canvas>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de Início/Configurações -->
  <div id="gameModal" class="modal-overlay hidden" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <h2 id="modal-title">Bem-vindo(a) ao Snake!</h2>
      <p class="subtitle">Criado por Paulinho</p>

      <div class="modal-section">
        <h3>Tamanho da Grade</h3>
        <div class="grid-options">
          <label class="option">
            <input type="radio" name="gridSize" value="small" />
            <span>Pequeno (8x8)</span>
            <span class="hs">Recorde: <strong id="highScoreSmall">0</strong></span>
          </label>
          <label class="option">
            <input type="radio" name="gridSize" value="medium" />
            <span>Médio (20x20)</span>
            <span class="hs">Recorde: <strong id="highScoreMedium">0</strong></span>
          </label>
          <label class="option">
            <input type="radio" name="gridSize" value="large" />
            <span>Grande (30x30)</span>
            <span class="hs">Recorde: <strong id="highScoreLarge">0</strong></span>
          </label>
        </div>
      </div>

      <div class="modal-section">
        <h3>Opções</h3>
        <label class="toggle"><input type="checkbox" name="showGrid" checked /> Mostrar grade</label>
        <label class="toggle"><input type="checkbox" name="soundOn" checked /> Som</label>
        <label class="toggle"><input type="checkbox" name="showParticles" checked /> Partículas</label>
      </div>

      <div class="modal-actions">
        <button id="confirmBtn" class="game-btn">Começar</button>
        <button id="newGameBtn" class="game-btn secondary">Novo Jogo</button>
      </div>
    </div>
  </div>

  <!-- Modal de Game Over -->
  <div id="gameOverModal" class="modal-overlay hidden" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <h2 id="gameOverTitle">Game Over</h2>
      <p>Sua pontuação: <strong id="finalScore">0</strong></p>
      <div class="record-info" id="recordInfo"></div>
      <div class="modal-actions">
        <button id="resumeFromOver" class="game-btn">Jogar de novo</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // Ligar botão "Jogar de novo" para abrir modal
    document.addEventListener('DOMContentLoaded', () => {
      const resumeBtn = document.getElementById('resumeFromOver');
      resumeBtn.addEventListener('click', () => {
        document.getElementById('gameOverModal').classList.add('hidden');
        gameState.wasRunningBeforeMenu = false;
        gameState.isFromGameOver = true;
        modalSystem.show();
      });
    });
  </script>
</body>
</html>