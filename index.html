<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snake</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Snake</h1>
      <p class="subtitle">Criado por Paulinho</p>
    </header>

    <main class="main">
      <div class="game-panel">
        <div class="game-info">
          <div class="score-board">
            <span>Pontos: <strong id="score">0</strong></span>
            <span>Recorde: <strong id="highScore">0</strong></span>
          </div>
          <div class="game-controls">
            <button id="startBtn" class="game-btn">Iniciar</button>
            <button id="pauseBtn" class="game-btn hidden">Pausar</button>
            <button id="restartBtn" class="game-btn">Reiniciar</button>
          </div>
        </div>
        <div class="canvas-wrapper">
          <canvas id="gameCanvas" width="520" height="520" tabindex="0" aria-label="Área do jogo"></canvas>
        </div>
      </div>

      <div id="gameOver" class="game-over hidden" aria-live="polite">
        <h2>Game Over</h2>
        <p>Sua pontuação: <strong id="finalScore">0</strong></p>
        <div class="game-over-buttons">
          <button id="resumeFromOver" class="game-btn" type="button">Jogar de novo</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de Início/Configurações -->
  <div id="gameModal" class="modal-overlay hidden" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <h2 id="modal-title">Snake</h2>
      <p class="subtitle">Criado por Paulinho</p>

      <div class="modal-section">
        <h3>Tamanho da Grade</h3>
        <div class="grid-options">
          <label class="option">
            <input type="radio" name="gridSize" value="small" />
            <span>Pequeno (15x15)</span>
            <span class="hs">Recorde: <strong id="highScoreSmall">0</strong></span>
          </label>
          <label class="option">
            <input type="radio" name="gridSize" value="medium" />
            <span>Médio (20x20)</span>
            <span class="hs">Recorde: <strong id="highScoreMedium">0</strong></span>
          </label>
          <label class="option">
            <input type="radio" name="gridSize" value="large" />
            <span>Grande (25x25)</span>
            <span class="hs">Recorde: <strong id="highScoreLarge">0</strong></span>
          </label>
        </div>
      </div>

      <div class="modal-section">
        <h3>Opções</h3>
        <label class="toggle"><input type="checkbox" name="showGrid" checked /> Mostrar grade</label>
        <label class="toggle"><input type="checkbox" name="soundOn" checked /> Som</label>
        <label class="toggle"><input type="checkbox" name="showParticles" checked /> Partículas</label>
      </div>

      <div class="modal-actions">
        <button id="confirmBtn" class="game-btn">Começar</button>
        <button id="newGameBtn" class="game-btn secondary">Novo Jogo</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // Ligar botão "Jogar de novo" para abrir modal
    document.addEventListener('DOMContentLoaded', () => {
      const resumeBtn = document.getElementById('resumeFromOver');
      resumeBtn.addEventListener('click', () => {
        document.getElementById('gameOver').classList.add('hidden');
        const modal = document.getElementById('gameModal');
        modal.classList.remove('hidden');
        // O restante da lógica é tratada pelo modalSystem no script.js
      });
    });
  </script>
</body>
</html>